\documentclass[a4paper, 11pt, oneside]{book}

\usepackage[utf8]{inputenc}
\usepackage[english]{babel}   % Babel, replace with your language
\usepackage[T1]{fontenc}      % Font encoding
\usepackage{lmodern,cmap}     % lmodern font, correctly copyable characters in pdf

%\usepackage{hyperref}
\usepackage[hidelinks]{hyperref}
\usepackage{color}
\usepackage{setspace}
\usepackage{caption}

\usepackage{geometry}
\newgeometry{left=3.5cm, right=2.5cm, top=2.7cm, bottom=2.5cm}

\usepackage{amsmath}
\usepackage{amsfonts}

\makeatletter
\newif\if@restonecol
\makeatother

\usepackage[titletoc]{appendix}
\usepackage{rotating}
\usepackage{epigraph}
\usepackage{float}

%ALGORITHM
\let\algorithm\relax
\let\endalgorithm\relax
\usepackage[linesnumbered,ruled,algonl,vlined]{algorithm2e}
\newcommand\mycommentfont[1]{\footnotesize \ttfamily \textcolor{blue}{#1}}
\SetCommentSty{mycommentfont}
\newcounter{algoline}

%GRAPHICS
\usepackage{graphicx}
\usepackage{epstopdf}
\DeclareGraphicsExtensions{.pdf,.eps,.png,.jpg,.mps}
\usepackage{placeins} % for \FloatbBarrier

%HEADER FOOTER
\usepackage{fancyhdr}
\fancyhf{}
\fancyhead[LO]{\slshape \rightmark}
\fancyhead[LE]{\slshape \leftmark}
\fancyhead[R]{\thepage}
\renewcommand{\headrulewidth}{0.0mm}
\renewcommand{\footrulewidth}{0.0mm}
\pagestyle{fancy}
\renewcommand{\chaptermark}[1]{\markright{\thechapter.\ #1}{}} %\chaptername\ 
\renewcommand{\sectionmark}[1]{\markright{\thesection.\ #1}}
\renewcommand{\MakeUppercase}[1]{#1} % Get rid of CONTENTS BIBLIOGRAPHY upper cases


%LISTING
\usepackage[T1]{fontenc}
\usepackage{inconsolata}

\definecolor{pblue}{rgb}{0.13,0.13,1}
\definecolor{pgreen}{rgb}{0,0.5,0}
\definecolor{pred}{rgb}{0.9,0,0}
\definecolor{pgrey}{rgb}{0.26,0.25,0.25}

\usepackage{listings}
\renewcommand{\lstlistlistingname}{List of Code Listings}
\renewcommand{\lstlistingname}{Code Snippet}
\lstset{language=Java,
    showspaces=false,
    showtabs=false,
    breaklines=true,
    showstringspaces=false,
    breakatwhitespace=true,
    commentstyle=\color{pgreen},
    keywordstyle=\color{pblue},
    stringstyle=\color{pred},
    basicstyle=\ttfamily,
    moredelim=[il][\textcolor{pgrey}]{_!_},
    moredelim=[is][\textcolor{pgrey}]{\%\%}{\%\%}
}

%BUNDLE FIGURES AND TABLES TOGATHER
\makeatletter
\providecommand\phantomsection{}% for hyperref

\newcommand\listofillustrations{%
    \chapter*{List of Illustrations}%
    \phantomsection
    \addcontentsline{toc}{chapter}{List of Illustrations}%
    \section*{Figures}%
    \phantomsection
    %\addcontentsline{toc}{section}{\protect\numberline{} Figures}%
    \@starttoc{lof}%
    \bigskip
    \section*{Tables}%
    \phantomsection
    %\addcontentsline{toc}{section}{\protect\numberline{} Tables}%
    \@starttoc{lot}
}
\makeatother

\newtheorem{theorem}{Theorem}[section]
\newtheorem{corollary}{Corollary}[theorem]
\newtheorem{lemma}[theorem]{Lemma}

\renewcommand\floatpagefraction{.9}
\renewcommand\topfraction{.9}
\renewcommand\bottomfraction{.9}
\renewcommand\textfraction{.1}

\frenchspacing \sloppy

\newcommand*{\perm}[2]{{}^{#1}\!P_{#2}}%
\newcommand*{\comb}[2]{{}^{#1}C_{#2}}%

\newcommand{\eat}[1]{}
\hyphenation{}


\input{misc/infocmd.tex}



\begin{document}
\pagenumbering{roman}
\input{misc/cover.tex}
\clearpage

\frontmatter
\input{misc/title.tex}
\clearpage
\input{misc/declaration.tex}
\clearpage
\input{misc/acknowledgements.tex}
\clearpage
%\input{misc/spine.tex} \clearpage


%\setcounter{page}{1}
%\pagenumbering{roman}
\onehalfspacing
\input{misc/abstract.tex}
\cleardoublepage
%\maketitle
%\linespread{0.8}
\phantomsection \label{xcontents}
\addcontentsline{toc}{chapter}{Contents}
\tableofcontents
\cleardoublepage

\onehalfspacing

\phantomsection \label{xfigs}
\addcontentsline{toc}{chapter}{List of Figures}
%\listofillustrations
\listoffigures
\cleardoublepage

\phantomsection \label{xalgos}
\addcontentsline{toc}{chapter}{List of Algorithms}
\listofalgorithms
\cleardoublepage

\phantomsection \label{xtables}
\addcontentsline{toc}{chapter}{List of Tables}
\listoftables
\cleardoublepage


\phantomsection \label{xlistings}
\addcontentsline{toc}{chapter}{\lstlistlistingname}
\lstlistoflistings
\cleardoublepage


\mainmatter
%\normalsize
\onehalfspacing
\pagenumbering{arabic}
\setcounter{page}{1}

\input{introduction.tex}
%\input{literature.tex}
\input{background.tex}
\input{algorithm.tex}
\input{dataset.tex}
\input{exp.tex}
\input{conclusion.tex}
\cleardoublepage


\bibliographystyle{apalike}
\phantomsection \label{xbib}
\addcontentsline{toc}{chapter}{Bibliography}
\bibliography{ref}
\clearpage

\begin{appendices}
    \appendixpage
    \noappendicestocpagenum
    \addappheadtotoc
    
    \input{appendices.tex}    
\end{appendices}


\end{document}
